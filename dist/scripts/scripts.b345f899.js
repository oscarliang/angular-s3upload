mobilecheck=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},mobileAndTabletcheck=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},gaDeviceCheck=function(){return mobileAndTabletcheck()?mobilecheck()?"mobile":"tablet":"main"},isNotNullObject=function(a){return!angular.isUndefined(a)&&null!==a},isNullObject=function(a){return!(!angular.isUndefined(a)&&null!==a)},showUIMessage=function(a,b,c){a.showAlert=!0,a.roletype=b,a.message=c};var app=angular.module("oscarUI",["ui.router","ui.bootstrap","ngResource","ngFileUpload"]);app.run(["$state","$rootScope","$timeout","User","Preload","config",function(a,b,c,d,e,f){this.init=function(){b.APP_SUBJECT=f.appsubject,b.PROJECT_URL=f.api_url,b.PROJECT_LOGO="./images/logo.png",b.PROJECT="cp"===f.project?"cp":"ga",b.PROJECTSUBJECT=f.projectsubject,b.printer=function(){print()}},logout=function(){a.go("login")},b.logout=logout,b.device=gaDeviceCheck(),this.init()}]),app.filter("startFrom",function(){return function(a,b){if(angular.isDefined(a))return b=b<0?0:b,a.slice(b)}}),app.filter("fieldFilter",function(){return function(a,b,c,d){var e=[];return isNotNullObject(a)&&a.length>0&&isNotNullObject(c)&&""!==c?(angular.forEach(a,function(a){a[b].toLowerCase().indexOf(c.toLowerCase())!==-1&&e.push(a),d&&a.checked&&(keepItem=a)}),d&&e.unshift(keepItem),e):a}}),app.filter("uploadDateFilter",["Time",function(a){return function(b){return angular.isUndefined(b)||(b=a.toDateString(b,"week")),b}}]),app.filter("uploadFileNameFilter",function(){return function(a){if(!angular.isUndefined(a)){var b=a.lastIndexOf("/");a=a.substring(b+1)}return a}}),app.config(["$stateProvider","$urlRouterProvider",function(a,b){b.otherwise("login"),a.state("main",{url:"",templateUrl:"views/main-view.html",abstract:!0,activetab:"main"}),a.state("main.dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard.html",abstract:!0,activetab:"dashboard"}),a.state("main.dashboard.overview",{url:"/overview",templateUrl:"dashboard/overview/dashboard-overview.html",controller:"OverviewController",activetab:"dashboard"}),a.state("main.dashboard.upload",{url:"/upload",templateUrl:"dashboard/upload/file-upload.html",controller:"FileUploadController",activetab:"dashboard"}),a.state("mobile",{url:"/mobile",templateUrl:"views/mobile-view.html",abstract:!0,activetab:"mobile",controller:"MobileController"}),a.state("mobile.dashboard",{url:"/dashboard",templateUrl:"dashboard/dashboard-mobile.html",abstract:!0,activetab:"dashboard"}),a.state("mobile.dashboard.overview",{url:"/overview",templateUrl:"dashboard/overview/dashboard-overview.html",controller:"OverviewController",activetab:"dashboard"}),a.state("login",{url:"/login",templateUrl:"other/login/login.html",controller:"LoginController",activetab:"login"})}]),app.service("Preload",["$q",function(a){this.fetch=function(){self=this;var b=a.defer();return b.resolve(!0),b.promise}}]),app.service("User",function(){this.token=null,this.role=null,this.email=null,this.customerID=null,this.resellerID=null,this.userID=null,this.name=null,this.logo=null,this.setUser=function(a,b,c,d,e,f,g,h){this.email=a,this.role=b,this.token=d,this.userID=e,this.customerID=f,this.resellerID=g,this.name=c,this.logo=h},this.setUserLogo=function(a){this.logo=a},this.getUser=function(){return{token:this.token,role:this.role,email:this.email,userID:this.userID,resellerID:this.resellerID,customerID:this.customerID,name:this.name,logo:this.logo}}}),app.service("Time",["$rootScope","StringUtil",function(a,b){this.timezoneConsts=[{timezonedata:"Europe/London",label:"Europe/London"},{timezonedata:"Australia/Eucla",label:"Australia/WA/Eucla"},{timezonedata:"Australia/Darwin",label:"Australia/NT"},{timezonedata:"Australia/Adelaide",label:"Australia/SA/Broken Hill"},{timezonedata:"Australia/Brisbane",label:"Australia/Qld"},{timezonedata:"Australia/Sydney",label:"Australia/Syd/Melb/Hobart"},{timezonedata:"Australia/Lord_Howe",label:"Australia/LHI"},{timezonedata:"Australia/Perth",label:"Australia/WA/Perth"},{timezonedata:"Asia/Shanghai",label:"Philippines/Manila"}],this.getTimeZoneByTimezoneData=function(a){for(var b=null,c=this.timezoneConsts,d=0;d<c.length;d++)if(c[d].timezonedata===a){b=c[d];break}return null===b&&(b={timezonedata:a,label:a},this.timezoneConsts.push(b)),b},this.getDateByPeriod=function(a,b){var c={},d=moment(a);return c.from=new Date(d.startOf(b).toString()),c.to=new Date(d.endOf(b).toString()),c},this.getDateBetweenDate=function(a,b){var c={};return c.from=new Date(moment(a).startOf("day").toString()),c.to=new Date(moment(b).endOf("day").toString()),c},this.getStartOfDay=function(a){return new Date(moment(a).startOf("day").toString())},this.getStartOfLastHour=function(a){return new Date(moment(a).subtract(1,"hours").startOf("hour").toString())},this.getEndOfDay=function(a){return new Date(moment(a).endOf("day").toString())},this.getPastDateByPeriod=function(a,b){var c=new Date(a);return c.setDate(c.getDate()-1),this.getDateByPeriod(c,b)},this.intervalByGranularity=function(a){return{month:2419200,week:604800,day:86400,hour:3600,"30m":1800,"15m":900,"5m":300}[a]},this.formatDate=function(a,b){return moment(a).format(b)},this.getGranularityByPeriod=function(a,b){var c;switch(a){case"year":c="month";break;case"month":case"week":c="day";break;case"isoweek":c="day",a="week";break;case"day":c=b||"hour";break;case"custom":c=b||"day"}return{type:c,format:this.granularityDateFormat(c),period:a}},this.toDateString=function(a,b){var c;switch(b){case"month":c="MMM YYYY";break;case"week":c="D/M/YYYY";break;case"day":c="ddd D MMM";break;case"hour":c="D/M h:mm a";break;case"30m":case"15m":case"5m":c="h:mm a"}return moment.unix(a).format(c)},this.granularityDateFormat=function(a){return{day:"d",week:"d MMM",month:"MMMM",hour:null,"5m":null,"15m":null,"30m":null}[a]},this.getNextMonthDate=function(a){return new Date(moment(a).add(1,"months").toString())},this.getPreMonthDate=function(a){return new Date(moment(a).subtract(1,"months").toString())},this.isAfter=function(a,b){return moment(a).isAfter(b)},this.isAfter=function(a,b,c){return c=c||"day",moment(a).isAfter(b,c)},this.isSame=function(a,b,c){return c=c||"day",moment(a).isSame(b,c)},this.isBefore=function(a,b,c){return c=c||"day",moment(a).isBefore(b,c)},this.getDefaultDates=function(a){var b=new Date,c=new Date;return b=b.setDate(b.getDate()-a),{start:b,end:c,now:c}},this.getDefaultReportDates=function(a){var b=new Date,c=new Date;return b=this.getStartOfDay(b.setDate(b.getDate()-a)),{start:b,end:c,now:c}},this.getNextDate=function(a,b){var c;switch(a){case"year":c=new Date(moment(b).add(1,"years").toString());break;case"month":c=new Date(moment(b).add(1,"months").toString());break;case"isoweek":c=new Date(moment(b).add(1,"weeks").toString());break;case"day":c=new Date(moment(b).add(1,"days").toString());break;case"hour":c=new Date(moment(b).add(1,"hours").toString())}return c},this.getPreviousDate=function(a,b){var c;switch(a){case"year":c=new Date(moment(b).subtract(1,"years").toString());break;case"month":c=new Date(moment(b).subtract(1,"months").toString());break;case"isoweek":c=new Date(moment(b).subtract(1,"weeks").toString());break;case"day":c=new Date(moment(b).subtract(1,"days").toString());break;case"hour":c=new Date(moment(b).subtract(1,"hours").toString())}return c},this.getUTByTimezoneByMs=function(a,b){return a-=60*moment.tz.zone(b.timezonedata).offset(1e3*a)},this.convertFromUtcToLocalUnixTimeStamp=function(a,b){var c=moment.tz.zone(b.timezonedata).offset(1e3*a);return parseInt(a)+60*c},this.getUTByTimezone=function(a,b,c){return a=a+60*moment.tz.zone(b.timezonedata).offset(1e3*a)-60*moment.tz.zone(c.timezonedata).offset(1e3*a)},this.setGlobalTimeZone=function(b){a.timezone=b},this.setGlobalTimeZone=function(b,c){return a.timezone=c,b.timezone=c,b},this.validUnixTime=function(a){return new Date(1e3*a).getTime()>0},this.getDatePreviousByNumberOfDay=function(a,b){return new Date(a-1e3*b*60*60*24)}}]),app.service("StringUtil",function(){this.inArray=function(a,b){for(var c=b.length;c--;)if(b[c]===a)return!0;return!1},this.isNull=function(a){return null===a||""===a},this.roundToDecimal=function(a,b){return parseFloat(parseFloat(a).toFixed(b))}}),angular.module("oscarUI").controller("OverviewController",["$rootScope","$scope","OverviewModel",function(a,b,c){Overview=new c,OverviewController=function(){b.model=Overview,Overview.getFileList().then(function(a){b.fileList=a})},OverviewController()}]),app.factory("OverviewModel",["fileApi",function(a){function b(){_self=this}return b.prototype={getFileList:function(){return a.getFileList()}},b}]),angular.module("oscarUI").controller("FileUploadController",["$scope","Time","Upload","config","$timeout",function(a,b,c,d,e){function f(a,b){return c.upload({url:d.api_url+"/api/history/upload",fields:a,file:b})}a.uploadBill=function(c){var d={id:"1000",email:"test@email.com",role:"customer",date:moment(b.getStartOfDay(new Date)).unix()};a.fetching=!0,f(d,c).then(function(b){a.fetching=!1,showUIMessage(a,"success","File uploaded successfully")},function(b){a.fetching=!1,showUIMessage(a,"danger",b.data.errorMessage)})},new function(){a.errorMessage="",a.showAlert=!1,a.fetching=!1}}]),angular.module("oscarUI").controller("MobileController",["$scope",function(a){a.dashboardshow=!0,a.dashboardShow=function(){a.dashboardshow=!a.dashboardshow,a.manageshow=!1},a.manageboardshow=function(){a.manageshow=!a.manageshow,a.dashboardshow=!1}}]),angular.module("oscarUI").controller("LoginController",["$rootScope","$scope","$state","userApi","Preload",function(a,b,c,d,e){var f="mobile"===a.device?"mobile":"main",g=f+".dashboard.overview";b.username="test@oscar.com",b.password="1111",b.login=function(){var f=b.username,h=b.password;b.fetching=!0,d.authenticateUser(f,h).then(function(d){b.fetching=!1,e.fetch().then(function(){b.fetching=!1,a.ACCOUNT_LOGO=a.PROJECT_LOGO_POSITIVE,c.go(g)})},function(a){b.fetching=!1,b.errorMessage=a.errorMessage})}}]);var searchTextfieldController=function(a,b,c){};angular.module("oscarUI").directive("searchTextField",function(){return{restrict:"E",templateUrl:"components/ui/form/search-textfield-directive.html",scope:{filtermodel:"="},controller:["$scope","$document","$element",searchTextfieldController],link:function(a,b,c,d){}}}),app.factory("config",function(){return config={projectsubject:"Oscar Test",api_url:"http://10.10.10.10"},config}),app.factory("httpWrapper",["$resource","$http","$q","$rootScope",function(a,b,c,d){return{xssValidate:function(a){for(var b=["<%","<script","&lt;script"],c=!0,e=null,f=0;f<a.length;f++)if(e=JSON.stringify(a[f]),e.length>5&&!function(a,b){for(var c=!0,d=0;d<a.length;d++)if(b.indexOf(a[d])!==-1){console.log("xss error: "+b),c=!1;break}return c}(b,e)){c=!1;break}return!!c||(d.$broadcast("badrequest"),!1)},interpolate:function(a,b){return b&&angular.forEach(Object.keys(b),function(c){a=a.replace(":"+c,b[c])}),a},post:function(a,d,e,f){var g=this.interpolate(a,d);return this.xssValidate([g,e])?b({method:"POST",url:g,data:e,ignoreLoadingBar:f}).then(function(a){return a.data},function(a){return c.reject(a.data)}):c.reject("xss error")},get:function(b,d,e,f,g,h){return this.xssValidate([b,e])?a(b,d,{get:{method:"GET",cache:f,params:e,isArray:g,ignoreLoadingBar:h}}).get().$promise:c.reject("xss error")},put:function(a,d,e,f){return this.xssValidate([a,e])?b({method:"PUT",url:this.interpolate(a,d),ignoreLoadingBar:f,data:e}).then(function(a){return a.data},function(a){return c.reject(a.data)}):c.reject("xss error")},delete:function(b,d,e,f){return this.xssValidate([b,e])?a(b,d,{delete:{method:"DELETE",params:e,ignoreLoadingBar:f}}).delete().$promise:c.reject("xss error")}}}]),app.service("fileApi",["config","httpWrapper",function(a,b){this.G_API_FILE="/api/history/upload",this.getFileList=function(){return b.get(a.api_url+this.G_API_FILE,null,{userID:1e3,role:"customer"},!1,!0)}}]),app.service("userApi",["$window","$q",function(a,b){this.authenticateUser=function(a,c){var d=b.defer();return d.resolve(!0),d.promise},this.getUserList=function(){return a.data}}]);